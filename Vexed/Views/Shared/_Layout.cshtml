@using Vexed.Services;
@inject LanguageService language

@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Focus - Bootstrap Admin Dashboard </title>
    <!-- Favicon icon -->
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
    <link rel="stylesheet" href="/vendor/owl-carousel/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/vendor/owl-carousel/css/owl.theme.default.min.css">
    <link href="/vendor/jqvmap/css/jqvmap.min.css" rel="stylesheet">
    <link href="/css/style.css" rel="stylesheet">

    <!--Icons-->
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-EYqbJGVCCZvB8ZPTW6M3q2JjU6OwT8y39TJkKVC0rAZrZc0F+9dWntPKoiJh+0bhQQSlEXg8KKx+SW5ueHbklA==" crossorigin="anonymous" referrerpolicy="no-referrer" />


</head>

@if (!User.Identity.IsAuthenticated)
{
    <nav class="navbar navbar-expand-sm navbar-toggleable-sm bg-light">
        <div class="container-fluid">
            <a class="navbar-brand" asp-area="" asp-controller="Home" asp-action="Index">Vexed</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target=".navbar-collapse" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse d-sm-inline-flex justify-content-between">
                <ul class="navbar-nav flex-grow-1">
                    <li class="nav-item">
                        <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Index">@language.GetKey("home")</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="AboutUs">@language.GetKey("aboutus")</a>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="true">Language</a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" asp-controller="Home" asp-action="ChangeLanguage" asp-route-culture="en-US">
                                <img src="~/images/flags/united-kingdom.png" width="20">English
                            </a>
                            <a class="dropdown-item" asp-controller="Home" asp-action="ChangeLanguage" asp-route-culture="ro-RO">
                                <img src="~/images/flags/romania.png" width="20">Romana
                            </a>
                        </div>
                    </li>
                </ul>
                <!--Login and register buttons-->
                <li class="nav-item">
                    <a class="nav-link text-dark" id="register" asp-area="Identity" asp-page="/Account/Register">@language.GetKey("Register")</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-dark" id="login" asp-area="Identity" asp-page="/Account/Login">@language.GetKey("Login")</a>
                </li>
            </div>
        </div>
    </nav>
    @RenderBody()

    @RenderSection("scripts", required: false)
}
else
{

    <body>

        <!--******************* Preloader start ********************-->
        <div id="preloader">
            <div class="sk-three-bounce">
                <div class="sk-child sk-bounce1"></div>
                <div class="sk-child sk-bounce2"></div>
                <div class="sk-child sk-bounce3"></div>
            </div>
        </div>
        <!--*******************  Preloader end ********************-->
        <!--********************************** Main wrapper start ***********************************-->
        <div id="main-wrapper">

            <!--********************************** Nav header start ***********************************-->
            <div class="nav-header">
                <a href="index.html" class="brand-logo">
                    <img class="logo-abbr" src="/images/logo.png" alt="">
                    <img class="logo-compact" src="/images/logo-text.png" alt="">
                    <img class="brand-title" src="/images/logo-text.png" alt="">
                </a>

                <div class="nav-control">
                    <div class="hamburger">
                        <span class="line"></span><span class="line"></span><span class="line"></span>
                    </div>
                </div>
            </div>
            <!--********************************** Nav header end ***********************************-->
            <!--********************************** Header start ***********************************-->
            <div class="header">
                <div class="header-content">
                    <nav class="navbar navbar-expand">
                        <div class="collapse navbar-collapse justify-content-between">
                            <div class="header-left">
                            </div>
                            <!--User profile-->
                            <ul class="navbar-nav header-right">
                                <li class="nav-item dropdown header-profile">
                                    <a class="nav-link" href="#" role="button" data-toggle="dropdown">
                                        <i class="mdi mdi-account"></i>
                                    </a>

                                    <a>@User.Identity.Name</a>
                                    <hr>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <a class="dropdown-item" asp-controller="Home" asp-action="ChangeLanguage" asp-route-culture="en-US">
                                            <img src="~/images/flags/united-kingdom.png" width="20"> English
                                        </a>
                                        <a class="dropdown-item" asp-controller="Home" asp-action="ChangeLanguage" asp-route-culture="ro-RO">
                                            <img src="~/images/flags/romania.png" width="20"> Română
                                        </a>

                                        <hr />
                                        <a class="dropdown-item" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">
                                            <i class='bx bxs-user nav_icon'></i> <span class="ml-2">Account </span>
                                        </a>
                                        <a class="dropdown-item text-danger" data-toggle="modal" data-target="#basicModal" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                                            <i class='bx bx-log-out nav_icon'></i> <span class="ml-2">Logout </span>
                                        </a>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
            <!--********************************** Header end ti-comment-alt ***********************************-->
            <!--********************************** Sidebar start ***********************************-->
            <div class="quixnav">
                <div class="quixnav-scroll">
                    <ul class="metismenu" id="menu">

                        <li class="nav-label first">Main Menu</li>
                        <li>
                            <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                <i class='bx bxs-dashboard'></i><span class="nav-text">Dashboard</span>
                            </a>
                            <ul aria-expanded="false">
                                <li><a asp-controller="Home" asp-action="Index">Dashboard</a></li>
                                <li><a asp-controller="Home" asp-action="Calendar">Calendar</a></li>
                            </ul>
                        </li>

                        <li class="nav-label">Cards</li>
                        <li>
                            <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                <i class='bx bx-bookmark-plus'></i><span class="nav-text">Cards</span>
                            </a>
                            <ul aria-expanded="false">
                                <li><a asp-controller="TimeCards" asp-action="Index">Time Cards</a></li>
                                <li><a asp-controller="LeaveRequests" asp-action="Index">Leave Requests</a></li>
                            </ul>
                        </li>

                        <li class="nav-label">Contact</li>
                        <li>
                            <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                <i class='bx bxs-contact'></i><span class="nav-text">Contacts</span>
                            </a>
                            <ul aria-expanded="false">
                                <li><a asp-controller="ContactInfoes" asp-action="Index">Information</a></li>
                                <li><a asp-controller="EmergencyContacts" asp-action="Index">Emergency</a></li>
                            </ul>
                        </li>

                        <li class="nav-label">User</li>
                        <li>
                            <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                <i class='bx bxs-user-detail'></i><span class="nav-text">User</span>
                            </a>
                            <ul aria-expanded="false">
                                <li><a asp-controller="Qualifications" asp-action="Index">Qualifications</a></li>
                                <li><a asp-controller="UserEmployments" asp-action="OrganizationChart">Organization Chart</a></li>
                                <li><a asp-controller="UserDetails" asp-action="Details">Details</a></li>
                                <li><a asp-controller="UserEmployments" asp-action="Details">Employment</a></li>
                            </ul>
                        </li>

                        @if (User.IsInRole("HumanResources"))
                        {
                            <li class="nav-label">Human Resources</li>
                            <li>
                                <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                    <i class='bx bx-box'></i><span class="nav-text">Manage requests</span>
                                </a>
                                <ul aria-expanded="false">
                                    <li><a asp-controller="TimeCards" asp-action="IndexHR">Time Cards</a></li>
                                    <li><a asp-controller="LeaveRequests" asp-action="IndexHR">Leave Requests</a></li>
                                </ul>
                            </li>
                            <li>
                                <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                                    <i class='bx bx-group'></i><span class="nav-text">Manage users</span>
                                </a>
                                <ul aria-expanded="false">
                                    <li><a asp-controller="UserDetails" asp-action="Index">Details</a></li>
                                    <li><a asp-controller="UserEmployments" asp-action="Index">Employment</a></li>
                                </ul>
                            </li>
                        }

                    </ul>
                </div>


            </div>
            <!--********************************** Sidebar end ***********************************-->
            <!--********************************** Content body start ***********************************-->
            <div class="content-body">
                <!-- row -->
                <div class="container-fluid">
                    @RenderBody()

                </div>
            </div>
            <!--********************************** Content body end ***********************************-->
            <!--********************************** Footer start ***********************************-->
            <div class="footer">
                <div class="copyright">
                    <p>Copyright © Designed &amp; Developed by <a href="#" target="_blank">Quixkit</a> 2019</p>
                    <p>Distributed by <a href="https://themewagon.com/" target="_blank">Themewagon</a></p>
                </div>
            </div>
            <!--********************************** Footer end ***********************************-->
            <!--********************************** Support ticket button start ***********************************-->


        </div>
        <!--********************************** Main wrapper end ***********************************-->
        <!--********************************** Scripts ***********************************-->
        <!-- Required vendors -->
        <script src="/vendor/global/global.min.js"></script>
        <script src="/js/quixnav-init.js"></script>
        <script src="/js/custom.min.js"></script>


        <!-- Vectormap -->
        <script src="/vendor/raphael/raphael.min.js"></script>
        <script src="/vendor/morris/morris.min.js"></script>


        <script src="/vendor/circle-progress/circle-progress.min.js"></script>
        <script src="/vendor/chart.js/Chart.bundle.min.js"></script>

        <script src="/vendor/gaugeJS/dist/gauge.min.js"></script>

        <!--  flot-chart js -->
        <script src="/vendor/flot/jquery.flot.js"></script>
        <script src="/vendor/flot/jquery.flot.resize.js"></script>

        <!-- Owl Carousel -->
        <script src="/vendor/owl-carousel/js/owl.carousel.min.js"></script>

        <!-- Counter Up -->
        <script src="/vendor/jqvmap/js/jquery.vmap.min.js"></script>
        <script src="/vendor/jqvmap/js/jquery.vmap.usa.js"></script>
        <script src="/vendor/jquery.counterup/jquery.counterup.min.js"></script>


        <script src="/js/dashboard/dashboard-1.js"></script>

        <!-- Datatable -->
        <script src="/vendor/datatables/js/jquery.dataTables.min.js"></script>
        <script src="/js/plugins-init/datatables.init.js"></script>

        <!-- BOT -->
        @*<script type="text/javascript">!function (t, e) { t.artibotApi = { l: [], t: [], on: function () { this.l.push(arguments) }, trigger: function () { this.t.push(arguments) } }; var a = !1, i = e.createElement("script"); i.async = !0, i.type = "text/javascript", i.src = "https://app.artibot.ai/loader.js", e.getElementsByTagName("head").item(0).appendChild(i), i.onreadystatechange = i.onload = function () { if (!(a || this.readyState && "loaded" != this.readyState && "complete" != this.readyState)) { new window.ArtiBot({ i: "dc2af663-9532-4a38-83a7-1fd532dc2b5e" }); a = !0 } } }(window, document);</script>*@
        <script>var BotStar = { appId: "s9664f250-d3db-11ed-8d15-77cb2b3ccda0", mode: "livechat" }; !function (t, a) { var e = function () { (e.q = e.q || []).push(arguments) }; e.q = e.q || [], t.BotStarApi = e; !function () { var t = a.createElement("script"); t.type = "text/javascript", t.async = 1, t.src = "https://widget.botstar.com/static/js/widget.js"; var e = a.getElementsByTagName("script")[0]; e.parentNode.insertBefore(t, e) }(); }(window, document)</script>

        @RenderSection("scripts", required: false)
    </body>


    <!-- Modal -->
    <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Page("/", new { area = "" })" method="post">
        <div class="modal fade" id="basicModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">

                        <h5 class="modal-title">
                            <i class='bx bx-log-out nav_icon'></i>
                            Logout
                        </h5>
                        <button type="button" class="close" data-dismiss="modal">
                            <span>&times;</span>
                        </button>
                    </div>
                    <div class="modal-body" style="text-align: center;">
                        <img src="~/images/logout.png" alt="Logout icon">
                        <br>
                        <br>
                        Are you sure you want to logout?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-danger">Logout</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
}
</html>